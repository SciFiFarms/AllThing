#!/usr/bin/env bash
cd services
gitmodules_path=../.gitmodules
echo "# Do not edit this file. It is generated by running \`technocore generate_gitmodules\`." > $gitmodules_path
echo "# It creates a module for each folder. This allows for different services to be present and visible in VS Code." >> $gitmodules_path

for folder in *; do
    if [ -d ${folder} ]; then
        # Will not run if no directories are available
        echo "[submodule \"$folder\"]" >> $gitmodules_path
        echo "path = services/$folder" >> $gitmodules_path
        echo "url = dummy_string_to_satisfy_vscode" >> $gitmodules_path
        echo "" >> $gitmodules_path
    fi
done
cd ..
